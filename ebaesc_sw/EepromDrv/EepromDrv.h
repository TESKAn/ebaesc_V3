/***********************************************************************************************
* IMPORTANT. Read the following Freescale Software License Agreement (“Agreement”)             *
* completely. By usage of this software, you indicate that you accept the terms of this 	   *
* Agreement and you also acknowledge that you have the authority, on behalf of your company,   *
* to bind your company to such terms. You may then download or install the file.               *                                                 *
*                                                                                              *
* FREESCALE END-USER SOFTWARE LICENSE AGREEMENT                                                *
*                                                                                              *
* This is a license agreement between you (either as an individual or as an authorized         *
* representative acting on behalf of your employer) and Freescale Semiconductor,               *
* Inc. (“Freescale”). It concerns your rights to use the software provided to you in binary    *
* or source code form and any accompanying written materials (the “Software”). The Software    *
* may include any updates or error corrections or documentation relating to the Software       *
* provided to you by Freescale under this License. In consideration for Freescale allowing     *
* you to access the Software, you are agreeing to be bound by the terms of this Agreement.     *
* If you do not agree to all of the terms of this Agreement, do not download or install the    *
* Software. If you change your mind later, stop using the Software and delete all copies of    *
* the Software in your possession or control. Any copies of the Software that you have         *
* already distributed, where permitted, and do not destroy will continue to be governed by     *
* this Agreement. Your prior use will also continue to be governed by this Agreement.          *
*                                                                                              *
* 1. LICENSE GRANT. Freescale grants to you, free of charge, the non-exclusive,                *
* non-transferable, non-sublicensable right (1) to use the Software, (2) to reproduce the      *
* Software, (3) to prepare derivative works of the Software, and 4) to distribute the Software *
* and derivative works thereof in object (machine–readable) form as part of a programmable     *
* processing unit (e.g. a microprocessor, microcontroller, or digital signal processor)        *
* supplied directly or indirectly from Freescale (“Freescale System”)                          *
*                                                                                              *
* You must notify Freescale, in writing, any time you create a derivative of the Software.     *
* Freescale owns all derivatives created from the Software, and derivatives are licensed       *
* to you under the same terms as the Software under this Agreement. Upon request, you must     *
* provide Freescale the source code of any derivative of the Software. If you violate any of   *
* the terms or restrictions of this Agreement, Freescale may immediately terminate this        *
* Agreement, and require that you stop using and delete all copies of the Software and any     *
* derivative in your possession or control. Any license granted above only extends to          *
* Freescale’s intellectual property rights that would be necessarily infringed by the Software *
* as provided to you by Freescale and as used within the scope of the licenses granted. You    *
* must advise Freescale of any results obtained including any problems or suggested            *
* improvements thereof. Freescale retains the right to use such results and related            *
* information in any manner it deems appropriate.                                              *
*                                                                                              *
* 2. OTHER RESTRICTIONS. Subject to the license grant above, the following restrictions apply: *
*   a. Freescale reserves all rights not expressly granted herein.                             *
*   b. You may not rent, lease, sublicense, lend or encumber the Software, unless otherwise    *
*      expressly agreed to within this Agreement                                               *
*   c. You may not distribute, manufacture, have manufactured, sublicense or otherwise         *
*      reproduce the Software for purposes other than intended in this Agreement.              *
*   d. You may not remove or alter any proprietary legends, notices, or trademarks contained   *
*      in the Licensed Software,                                                               *
*   e. The terms and conditions of this Agreement will apply to any Software updates,          *
*      provided to you at Freescale’s discretion, that replace and/or supplement the           *
*      original software, unless such update contains a separate license.                      *
*   f. You may not translate, reverse engineer, decompile, or disassemble the Software         *
*      provided to you solely in object code format (machine readable) except to the extent    *
*      applicable law specifically prohibits such restriction. You will prohibit your          *
*      sublicensees from translating, reverse engineering, decompiling, or disassembling the   *
*      Software except to the extent applicable law specifically prohibits such restriction.   *
*                                                                                              *
* 3. OPEN SOURCE. Any open source software included in the Software licensed herein is not     *
* licensed under the terms of this Agreement, but is instead licensed under the terms of       *
* applicable open source license(s), such as the BSD License, Apache License or the Lesser     *
* GNU General Public License. Your use of such open source software is subject to the terms    *
* of each applicable license. You must agree to the terms of each such applicable license,     *
* or you should not use the open source software.                                              *
*                                                                                              *
* 4. COPYRIGHT. The Software is licensed to you, not sold. Freescale owns the Software, and    *
* United States copyright laws and international treaty provisions protect the Software.       *
* Therefore, you must treat the Software like any other copyrighted material (e.g. a book or   *
* musical recording). You may not use or copy the Software for any other purpose than what is  *
* described in this Agreement. Except as expressly provided herein, Freescale does not grant   *
* to you any express or implied rights under any Freescale or third party patents,             *
* copyrights, trademarks, or trade secrets. Additionally, you must reproduce and apply any     *
* copyright or other proprietary rights notices included on or embedded in the Software to     *
* any copies made thereof, in whole or in part, if any. You may not remove any copyright       *
* notices of Freescale incorporated in the Software.                                           *
*                                                                                              *
* 5. TERM AND TERMINATION. The term of this Agreement shall commence on the date of            *
* installation or download and shall continue perpetually, unless earlier terminated in        *
* accordance with this Agreement. Freescale has the right to terminate this Agreement without  *
* notice and require that you stop using and delete all copies of the Software in your         *
* possession or control if you violate any of the terms or restrictions of this Agreement.     *
* Freescale may terminate this Agreement should any of the Software become, or in Freescale's  *
* reasonable opinion is likely to become, the subject of a claim of intellectual infringement  *
* or trade secret misappropriation. Upon termination, you must cease use of and destroy, the   *
* Software and confirm compliance in writing to Freescale. Upon termination, the license       *
* granted pursuant to this Agreement immediately terminates and the provisions of Sections 4   *
* through 18 will survive any termination of this Agreement.                                   *
*                                                                                              *
* 6. SUPPORT. Freescale is NOT obligated to provide any support, upgrades or new               *
* of the Software. If you wish, you may contact Freescale and report problems and provide      *
* suggestions regarding the Software. Freescale has no obligation whatsoever to respond in     *
* any way to such a problem report or suggestion. Freescale may make changes to the Software   *
* at any time, without any obligation to notify or provide updated versions of the Software    *
* to you.                                                                                      *
*                                                                                              *
* 7. NO WARRANTY. TO THE MAXIMUM EXTENT PERMITTED BY LAW, FREESCALE EXPRESSLY                  *
* DISCLAIMS ANY WARRANTY FOR THE SOFTWARE. THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY  *
* OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING, WITHOUT LIMITATION, THE IMPLIED           *
* WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT. YOU    *
* ASSUME THE ENTIRE RISK ARISING OUT OF THE USE OR PERFORMANCE OF THE SOFTWARE, OR ANY SYSTEMS *
* YOU DESIGN USING THE SOFTWARE (IF ANY). NOTHING IN THIS AGREEMENT MAY BE CONSTRUED AS A      *
* WARRANTY OR REPRESENTATION BY FREESCALE THAT THE SOFTWARE OR ANY DERIVATIVE WORK DEVELOPED   *
* WITH OR INCORPORATING THE SOFTWARE WILL BE FREE FROM INFRINGEMENT OF THE INTELLECTUAL        *
* PROPERTY RIGHTS OF THIRD PARTIES.                                                            *
*                                                                                              *
* 8. INDEMNITY. You agree to fully defend and indemnify Freescale from any and all             *
* claims, liabilities, and costs (including reasonable attorney’s fees) related to (1) your    *
* use (including your sublicensee’s use, if permitted) of the Software or (2) your violation   *
* of the terms and conditions of this Agreement.                                               *
*                                                                                              *
* 9. LIMITATION OF LIABILITY. IN NO EVENT WILL FREESCALE BE LIABLE, WHETHER IN                 *
* CONTRACT, TORT, OR OTHERWISE, FOR ANY INCIDENTAL, SPECIAL, INDIRECT, CONSEQUENTIAL OR        *
* PUNITIVE DAMAGES, INCLUDING, BUT NOT LIMITED TO, DAMAGES FOR ANY LOSS OF USE, LOSS OF TIME,  *
* INCONVENIENCE, COMMERCIAL LOSS, OR LOST PROFITS, SAVINGS, OR REVENUES TO THE FULL EXTENT     *
* SUCH MAY BE DISCLAIMED BY LAW EVEN IF INFORMED IN ADVANCE OF THE POSSIBILITY OF SUCH         *
* DAMAGES. FREESCALE’S LIABILITY WILL IN ANY EVENT AND UNDER ANY THEORY OF RECOVERY BE         *
* LIMITED TO THE TOTAL AMOUNT RECEIVED BY FREESCALE UNDER THIS AGREEMENT.                      *
*                                                                                              *
* 10. COMPLIANCE WITH LAWS; EXPORT RESTRICTIONS. You must not resell, re-export, or            *
* provide, directly or indirectly, the licensed software or direct product thereof, in any     *
* form without obtaining appropriate export or re-export licenses from the United States       *
* Government and from the country from which the export or re-export is to occur. An export    *
* occurs when products, technology, or software is transferred from one country to another by  *
* any means, including physical shipments, FTP file transfers, E-mails, faxes, remote server   *
* access, conversations, and the like. An export also occurs when technology or software is    *
* transferred to a foreign national in the United States, or foreign national of the country   *
* in which the business activity is taking place. A foreign national is any person who is      *
* neither a citizen nor permanent resident of the United States, or the country in which the   *
* business activity is taking place. Furthermore, if an export/import license, permit or other *
* government required authority (collectively referred to as “government authorization”) is    *
* required to transfer technology, software, hardware or other Freescale property to non-      *
* Freescale party(ies) and is not approved, then Freescale is not obligated to transfer the    *
* Software under this Agreement until such “government authorization” is granted..             *
*                                                                                              *
* 11. GOVERNMENT RIGHTS. The Licensed Software is a “Commercial Item” as defined in 48         *
* C.F.R. §2.101, consisting of “Commercial Computer Software” and “Commercial Computer         *
* Software Documentation,” as such terms are used in 48 C.F.R. § 12.212 or 48 C.F.R.           *
* §227.7202, as applicable and are only licensed to U.S. Government end users with the rights  *
* as are set forth herein..                                                                    *
*                                                                                              *
* 12. HIGH RISK ACTIVITIES. You acknowledge that the Software is not fault tolerant and        *
* is not designed, manufactured or intended by Freescale for incorporation into products       *
* intended for use or resale in on-line control equipment in hazardous, dangerous to life or   *
* potentially life-threatening environments requiring fail-safe performance, such as in the    *
* operation of nuclear facilities, aircraft navigation or communication systems, air traffic   *
* control, direct life support machines or weapons systems, in which the failure of products   *
* could lead directly to death, personal injury or severe physical or environmental damage     *
* (“High Risk Activities”). You specifically represent and warrant that you will not use the   *
* Software or any derivative work of the Software for High Risk Activities.                    *
*                                                                                              *
* 13. CHOICE OF LAW; VENUE; LIMITATIONS. You agree that the statutes and laws of the           *
* United States and the State of Texas, USA, without regard to conflicts of laws principles,   *
* will apply to all matters relating to this Agreement or the Software, and you agree that any *
* litigation will be subject to the exclusive jurisdiction of the state or federal courts in   *
* Texas, USA. You agree that regardless of any statute or law to the contrary, any claim or    *
* cause of action arising out of or related to this Agreement or the Software must be filed    *
* within one (1) year after such claim or cause of action arose or be forever barred.          *
*                                                                                              *
* 14. CONFIDENTIAL INFORMATION. You must treat the Software as confidential information        *
* and you agree to retain the Software in confidence perpetually, with respect to Software in  *
* source code form (human readable), or for a period of five (5) years from the date of        *
* termination of this Agreement, with respect to all other parts of the Software. During this  *
* period you may not disclose any part of the Software to anyone other than employees who have *
* a need to know of the Software and who have executed written agreements obligating them to   *
* protect such Licensed Software to at least the same degree of care as in this Agreement.     *
* You agree to use the same degree of care, but no less than a reasonable degree of care, with *
* the Software as you do with your own confidential information. You may disclose Software to  *
* the extent required by a court or under operation of law or order provided that you notify   *
* Freescale of such requirement prior to disclosure, which you only disclose information       *
* required, and that you allow Freescale the opportunity to object to such court or other      *
* legal body requiring such disclosure.                                                        *
*                                                                                              *
* 15. PRODUCT LABELING. You are not authorized to use any Freescale trademarks, brand          *
* names, or logos.                                                                             *
*                                                                                              *
* 16. ENTIRE AGREEMENT. This Agreement constitutes the entire agreement between you and        *
* Freescale regarding the subject matter of this Agreement, and supersedes all prior           *
* communications, negotiations, understandings, agreements or representations, either written  *
* or oral, if any. This Agreement may only be amended in written form, executed by you and     *
* Freescale.                                                                                   *
*                                                                                              *
* 17. SEVERABILITY. If any provision of this Agreement is held for any reason to be            *
* invalid or unenforceable, then the remaining provisions of this Agreement will be unimpaired *
* and, unless a modification or replacement of the invalid or unenforceable provision is       *
* further held to deprive you or Freescale of a material benefit, in which case the Agreement  *
* will immediately terminate, the invalid or unenforceable provision will be replaced with a   *
* provision that is valid and enforceable and that comes closest to the intention underlying   *
* the invalid or unenforceable provision.                                                      *
*                                                                                              *
* 18. NO WAIVER. The waiver by Freescale of any breach of any provision of this                *
* Agreement will not operate or be construed as a waiver of any other or a subsequent breach   *
* of the same or a different provision.                                                        *
***********************************************************************************************/

/**************************************************************************//*!
*
* @file      EepromDrv.h
*
* @author    B36524
* 
* @version   1.0
* 
* @date      Nov-13-2014
* 
* @brief     Run-time EEPROM routines for 56F847xx and 56F827xx DSC family. 
* 			 -All changes in settings should be done in EepromDrv_cfg.h file. 
* 			 -All user available functions are listed in "Function prototypes"
* 			 section. 
* 			 -When EEPROM_EMULATION in EepromDrv_cfg.h is set to 1,56F827xx 
* 			 DSC family is chosen. EEPROM is emulated based on 
* 			 Flash Driver Library(AN4860) in this case.
* 			 -When EEPROM_EMULATION in EepromDrv_cfg.h is set to 0,56F847xx 
* 			 DSC family is chosen. EEPROM is intrinsic in this case.
* 			 For more detailed description of all functions see 
* 			 "Function definitions" section in EepromDrv.c file.
* 			    
******************************************************************************/ 

#ifndef EEPROMDRV_H_
#define EEPROMDRV_H_

// Configuration file
#include "EepromDrv_cfg.h"


#if (EEPROM_EMULATION)
#include "FlashDrv.h"
#endif

/***************************************************************************
 * Data types 
 ***************************************************************************/
/* Generic word data types */

//typedef signed char    Word8;
typedef char    Word8;
typedef unsigned char  UWord8;
typedef signed short   Word16;
typedef unsigned short UWord16;
typedef signed long    Word32;
typedef unsigned long  UWord32;


/*****************************************************************************
 * Constants and macros 
 *****************************************************************************/
#define UD_CRC_CRCH				(*((volatile Word16*)0xE1C0))
#define UD_CRC_CRCL				(*((volatile Word16*)0xE1C1))
#define UD_CRC_TRANSPOSE		(*((volatile Word16*)0xE1C2))
#define UD_SIM_PCE2				(*((volatile Word16*)0xE40E))

#define EEPROM_FLASHDRV_SUCCESS 				0
#define EEPROM_FLASHDRV_FAIL 					1
#define EEPROM_FLASHDRV_ACCESS_ERROR			2
#define EEPROM_FLASHDRV_PROT_VIOLATION			3
#define EEPROM_ACCERR_MASK						0x20
#define EEPROM_PROT_VIOL_MASK					0x10
#define EEPROM_MGSTAT0_MASK						0x01

#if (EEPROM_EMULATION)
#define EEPROM_CRC_ERROR						4
#define Crc_Init()				(UD_SIM_PCE2|=0x0020)
#define EepromDrv_Init()		FlashDrv_Init()
#else

/*  FTFL registers definition  */
#define 	FTFL_FSTAT_E		0x1C780
#define 	FTFL_FCNFG_E		0x1C781
#define 	FTFL_FSEC_E			0x1C782
#define 	FTFL_FOPT_E			0x1C783
#define		FTFL_FCCOB3_E		0x1C784
#define		FTFL_FCCOB2_E		0x1C785
#define		FTFL_FCCOB1_E		0x1C786
#define		FTFL_FCCOB0_E		0x1C787
#define		FTFL_FCCOB7_E		0x1C788
#define		FTFL_FCCOB6_E		0x1C789	
#define		FTFL_FCCOB5_E		0x1C78A
#define		FTFL_FCCOB4_E		0x1C78B	
#define		FTFL_FCCOBB_E		0x1C78C
#define		FTFL_FCCOBA_E		0x1C78D
#define		FTFL_FCCOB9_E		0x1C78E
#define		FTFL_FCCOB8_E		0x1C78F
#define		FTFL_FPROT3_E		0x1C790
#define		FTFL_FPROT2_E		0x1C791
#define		FTFL_FPROT1_E		0x1C792
#define		FTFL_FPROT0_E		0x1C793
#define		FTFL_FEPROT_E		0x1C796
#define		FTFL_FDPROT_E		0x1C797

/* EEE Data Set Size Field Description 
 * Encoding of the total available FlexRAM for EEPROM use
 * */
#define 	EEESIZE_RSVD1		(0x0|0x30)	 /* Reserved   */      
#define 	EEESIZE_RSVD2		(0x1|0x30)	 /* Reserved   */        
#define 	EEESIZE_RSVD3		(0x2|0x30)	 /* Reserved   */       
#define 	EEESIZE_2048B		(0x3|0x30)   /* 2048 Bytes */ 
#define 	EEESIZE_1024B		(0x4|0x30)   /* 1024 Bytes */  
#define 	EEESIZE_512B		(0x5|0x30)   /* 512  Bytes */  
#define 	EEESIZE_256B		(0x6|0x30)   /* 256  Bytes */  
#define 	EEESIZE_128B		(0x7|0x30)   /* 128  Bytes */  
#define 	EEESIZE_64B			(0x8|0x30)   /* 64   Bytes */  
#define 	EEESIZE_32B			(0x9|0x30)   /* 32   Bytes */  
#define 	EEESIZE_RSVD4		(0xA|0x30)   /* Reserved   */
#define 	EEESIZE_RSVD5		(0xB|0x30)   /* Reserved   */
#define 	EEESIZE_RSVD6		(0xC|0x30)   /* Reserved   */
#define 	EEESIZE_RSVD7		(0xD|0x30)   /* Reserved   */
#define 	EEESIZE_RSVD8		(0xE|0x30)   /* Reserved   */
#define 	EEESIZE_0B			(0xF|0x30)   /* 0 Bytes, Default value */

/* D/E-Flash Partition Code Field Description 
 * Encoding of the data flash/EEPROM backup split within the FlexNVM
 * memory block.
 * */
#define 	DEPART_0K			0x0		/* no   EEPROM backup, 32KB remaining data flash */
#define 	DEPART_8K			0x1     /* 8KB  EEPROM backup, 24KB remaining data flash */
#define 	DEPART_16K			0x2		/* 16KB EEPROM backup, 16KB remaining data flash */
#define 	DEPART_32K			0x3		/* 32KB EEPROM backup, no   remaining data flash */
#define 	DEPART_RSVD1		0x4  	/* Reserved    */
#define 	DEPART_RSVD2		0x5  	/* Reserved    */
#define 	DEPART_RSVD3		0x6  	/* Reserved    */
#define 	DEPART_RSVD4		0x7     /* Reserved    */
#define 	DEPART_32K1			0x8		/* 32KB EEPROM backup, no   remaining data flash */
#define 	DEPART_24K			0x9     /* 24KB EEPROM backup, 8KB  remaining data flash */ 
#define 	DEPART_16K1			0xA		/* 16KB EEPROM backup, 16KB remaining data flash */
#define 	DEPART_0K1			0xB		/* no   EEPROM backup, 32KB remaining data flash */
#define 	DEPART_RSVD5		0xC  	/* Reserved    */
#define 	DEPART_RSVD6		0xD  	/* Reserved    */
#define 	DEPART_RSVD7		0xE  	/* Reserved    */
#define 	DEPART_RSVD8		0xF     /* Reserved  , Default value, no EEPROM  */

/*------------- Flash hardware algorithm operation commands -------------*/
#define 	FTFL_VERIFY_BLOCK		       0x00
#define 	FTFL_VERIFY_SECTION  		   0x01
#define 	FTFL_PROGRAM_CHECK		       0x02
#define 	FTFL_READ_RESOURCE             0x03
#define 	FTFL_PROGRAM_BYTE              0x04
#define 	FTFL_PROGRAM_WORD              0x05
#define 	FTFL_PROGRAM_LONGWORD          0x06
#define 	FTFL_ERASE_BLOCK	           0x08
#define 	FTFL_ERASE_SECTOR		       0x09
#define 	FTFL_PROGRAM_SECTION           0x0B
#define 	FTFL_VERIFY_ALL_BLOCK          0x40
#define 	FTFL_READ_ONCE                 0x41
#define 	FTFL_PROGRAM_ONCE    		   0x43
#define 	FTFL_ERASE_ALL_BLOCK           0x44
#define 	FTFL_SECURITY_BY_PASS          0x45
#define 	FTFL_PROGRAM_PARTITION		   0x80
#define 	FTFL_SET_EERAM    			   0x81

/* Flash margin read settings */
#define 	FTFL_MARGIN_NORMAL             0x0000
#define 	FTFL_USER_MARGIN_LEVEL1        0x0001
#define 	FTFL_USER_MARGIN_LEVEL0        0x0002
#define 	FTFL_FACTORY_MARGIN_LEVEL0     0x0003
#define 	FTFL_FACTORY_MARGIN_LEVEL1     0x0004

/* EEPROM base address for byte/word/long word operation */
#define 	EEPROM_BASE_ADDR_BYTE		   0x3c000
#define		EEPROM_BASE_ADDR_WORD		   0x1e000

#endif

/*****************************************************************************
 * Function prototypes 
 *****************************************************************************/
// CRC calculation function
extern UWord16 Crc_Calculation(UWord8 *pbData, UWord16 w16Cnt);

#if (EEPROM_EMULATION)
// Write FLASHDRV_IWRT_ENTRY.entry into the Flash that emulates EEPROM
extern UWord8 EepromDrv_Write(void);
// Read the old entry out from the Flash that emulates EEPROM, and store it to FLASHDRV_IWRT_ENTRY.entry
extern UWord8 EepromDrv_Read(UWord16 uw16EntryAge);
#else
// Read the IFR of Data Flash to get the size of EEPROM and the partition information
extern UWord32 GetEepromInfo(void);
// Set the size of EEPROM and the backup Flash size using the defined code
extern UWord32 DEFlashPartition(UWord8 EEEDataSize, UWord8 EEBackUpFlashSize);
// Enable EEPROM function, make FlexRAM interface to EEPROM
extern UWord32 SetEEEEnable(void);
// Disable EEPROM function, make FlexRAM regular RAM
extern UWord32 SetEEEDisable(void);
// Write a byte into EEPROM
extern void EepromWriteByte(UWord32 byteAddr,UWord8 data);
// Read a byte from EEPROM
extern void EepromReadByte(UWord32 byteAddr,UWord8 *data);
// Write a word into EEPROM
extern void EepromWriteWord(UWord32 wordAddr,UWord16 data);
// Read a word from EEPROM
extern void EepromReadWord(UWord32 wordAddr,UWord16 *data);
// Write a long word into EEPROM
extern void EepromWriteLongWord(UWord32 wordAddr,UWord32 data);
// Read a long word from EEPROM
extern void EepromReadLongWord(UWord32 wordAddr,UWord32 *data);
// Write a string of bytes into EEPROM
extern void EepromWriteByteString(UWord32 byteAddr,UWord8* data, UWord16 length);
// Read a string of bytes from EEPROM
extern void EepromReadByteString(UWord32 byteAddr,UWord8* data, UWord16 length);
// Write a string of words into EEPROM
extern void EepromWriteWordString(UWord32 wordAddr,UWord16* data, UWord16 length);
// Read a string of words from EEPROM
extern void EepromReadWordString(UWord32 wordAddr,UWord16* data, UWord16 length);
// Write a string of long words into EEPROM
extern void EepromWriteLongWordString(UWord32 wordAddr,UWord32* data, UWord16 length);
// Read a string of long words from EEPROM
extern void EepromReadLongWordString(UWord32 wordAddr,UWord32* data, UWord16 length);
#endif

/*****************************************************************************
 * Global variables declaration
 *****************************************************************************/
#if (!EEPROM_EMULATION)
// EEPROM data set size, which indicates the volume of EEPROM
extern UWord16 uw16EEESize;			
// FlexNVM partition code, which indicates the size of the remaining data flash(not for EEPROM backup)
extern UWord16 uw16EEBackUpFlashSize; 
#endif


/*****************************************************************************
 * Inline functions
 *****************************************************************************/
// Read longword from FlexRAM
inline UWord32 FlexRAM_ReadLongword(register UWord32 dwAddress)
{
	register UWord32 uw32RetVal;
	
asm(	move.l  dwAddress,r2	// Copy source address to R2 register 
		move.l	X:(r2),uw32RetVal
   );				   	

	return uw32RetVal;
}

// Write longword to FlexRAM
inline void FlexRAM_WriteLongword(register UWord32 dwAddress, register UWord32 dwData)
{
	
asm(	move.l  dwAddress,r2	// Copy source address to R2 register 
		move.l	dwData,X:(r2)
   );				   	
}

// Read word from FlexRAM
inline UWord16 FlexRAM_ReadWord(register UWord32 dwAddress)
{
	register UWord16 uw16RetVal;
	
asm(	move.l  dwAddress,r2	// Copy source address to R2 register 
		move.w	X:(r2),uw16RetVal
   );				   	

	return uw16RetVal;
}

// Write word to FlexRAM
inline void FlexRAM_WriteWord(register UWord32 dwAddress, register UWord16 dwData)
{
	
asm(	move.l  dwAddress,r2	// Copy source address to R2 register 
		move.w	dwData,X:(r2)
   );				   	
}

// Read byte from FlexRAM
inline UWord8 FlexRAM_ReadByte(register UWord32 dwAddress)
{
	register UWord8 uw8RetVal;
	
asm(	move.l  dwAddress,r2	// Copy source address to R2 register 
		move.bp	X:(r2),uw8RetVal
   );				   	

	return uw8RetVal;
}

// Write byte to FlexRAM
inline void FlexRAM_WriteByte(register UWord32 dwAddress, register UWord8 dwData)
{
	
asm(	move.l  dwAddress,r2	// Copy source address to R2 register 
		move.bp	dwData,X:(r2)
   );				   	
}

#endif /* EEPROMDRV_H_ */
